(this.webpackJsonppatientor=this.webpackJsonppatientor||[]).push([[0],{265:function(e,a,t){e.exports=t(443)},443:function(e,a,t){"use strict";t.r(a);var n,r,l,c=t(0),i=t.n(c),o=t(62),s=t.n(o),u=(t(270),t(38)),m=t.n(u),d=t(63),p=t(24),E=t(44),h=t.n(E),b=t(76),f=t(19),v=t(451),g=t(462),O=t(459),y=t(452),j="http://localhost:3001/api",C=t(77),w=t(21),k=function(e){return{type:"ADD_ENTRY",payload:e}},N={patients:{},diagnoses:new Array},S=Object(c.createContext)([N,function(){return N}]),D=function(e){var a=e.reducer,t=e.children,n=Object(c.useReducer)(a,N),r=Object(p.a)(n,2),l=r[0],o=r[1];return i.a.createElement(S.Provider,{value:[l,o]},t)},T=function(){return Object(c.useContext)(S)},A=t(458),x=t(454),H=t(461),F=t(460),R=t(18),I=t(453),Y=t(456),P=function(e){var a=e.name,t=e.label,n=e.options;return i.a.createElement(I.a.Field,null,i.a.createElement("label",null,t),i.a.createElement(R.b,{as:"select",name:a,className:"ui dropdown"},n.map((function(e){return i.a.createElement("option",{key:e.value,value:e.value},e.label||e.value)}))))},_=function(e){var a=e.field,t=e.label,n=e.placeholder;return i.a.createElement(I.a.Field,null,i.a.createElement("label",null,t),i.a.createElement(R.b,Object.assign({placeholder:n},a)),i.a.createElement("div",{style:{color:"red"}},i.a.createElement(R.a,{name:a.name})))},B=function(e){var a=e.diagnoses,t=e.setFieldValue,n=e.setFieldTouched,r="diagnosisCodes",l=a.map((function(e){return{key:e.code,text:"".concat(e.name," (").concat(e.code,")"),value:e.code}}));return i.a.createElement(I.a.Field,null,i.a.createElement("label",null,"Diagnoses"),i.a.createElement(Y.a,{fluid:!0,multiple:!0,search:!0,selection:!0,options:l,onChange:function(e,a){n(r,!0),t(r,a.value)}}),i.a.createElement(R.a,{name:r}))};(r=n||(n={}))[r.Healthy=0]="Healthy",r[r.LowRisk=1]="LowRisk",r[r.HighRisk=2]="HighRisk",r[r.CriticalRisk=3]="CriticalRisk",function(e){e.Male="male",e.Female="female",e.Other="other"}(l||(l={}));var q=[{value:l.Male,label:"Male"},{value:l.Female,label:"Female"},{value:l.Other,label:"Other"}],M=function(e){var a=e.onSubmit,t=e.onCancel;return i.a.createElement(R.d,{initialValues:{name:"",ssn:"",dateOfBirth:"",occupation:"",gender:l.Other},onSubmit:a,validate:function(e){var a={};return e.name||(a.name="Field is required"),e.ssn||(a.ssn="Field is required"),e.dateOfBirth||(a.dateOfBirth="Field is required"),e.occupation||(a.occupation="Field is required"),a}},(function(e){var a=e.isValid,n=e.dirty;return i.a.createElement(R.c,{className:"form ui"},i.a.createElement(R.b,{label:"Name",placeholder:"Name",name:"name",component:_}),i.a.createElement(R.b,{label:"Social Security Number",placeholder:"SSN",name:"ssn",component:_}),i.a.createElement(R.b,{label:"Date Of Birth",placeholder:"YYYY-MM-DD",name:"dateOfBirth",component:_}),i.a.createElement(R.b,{label:"Occupation",placeholder:"Occupation",name:"occupation",component:_}),i.a.createElement(P,{label:"Gender",name:"gender",options:q}),i.a.createElement(F.a,null,i.a.createElement(F.a.Column,{floated:"left",width:5},i.a.createElement(O.a,{type:"button",onClick:t,color:"red"},"Cancel")),i.a.createElement(F.a.Column,{floated:"right",width:5},i.a.createElement(O.a,{type:"submit",floated:"right",color:"green",disabled:!n||!a},"Add"))))}))},L=function(e){var a=e.modalOpen,t=e.onClose,n=e.onSubmit,r=e.error;return i.a.createElement(x.a,{open:a,onClose:t,centered:!1,closeIcon:!0},i.a.createElement(x.a.Header,null,"Add a new patient"),i.a.createElement(x.a.Content,null,r&&i.a.createElement(H.a,{inverted:!0,color:"red"},"Error: ".concat(r)),i.a.createElement(M,{onSubmit:n,onCancel:t})))},V=t(464),z=["The patient is in great shape","The patient has a low risk of getting sick","The patient has a high risk of getting sick","The patient has a diagnosed condition"],G=function(e){var a=e.rating,t=e.showText;return i.a.createElement("div",{className:"health-bar"},i.a.createElement(V.a,{icon:"heart",disabled:!0,rating:4-a,maxRating:4}),t?i.a.createElement("p",null,z[a]):null)},J=function(){var e=T(),a=Object(p.a)(e,2),t=a[0].patients,n=a[1],r=i.a.useState(!1),l=Object(p.a)(r,2),c=l[0],o=l[1],s=i.a.useState(),u=Object(p.a)(s,2),E=u[0],f=u[1],g=function(){o(!1),f(void 0)},y=function(){var e=Object(d.a)(m.a.mark((function e(a){var t,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.post("".concat(j,"/patients"),a);case 3:t=e.sent,r=t.data,n({type:"ADD_PATIENT",payload:r}),g(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0.response.data),f(e.t0.response.data.error);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(a){return e.apply(this,arguments)}}();return i.a.createElement("div",{className:"App"},i.a.createElement(v.a,{textAlign:"center"},i.a.createElement("h3",null,"Patient list")),i.a.createElement(A.a,{celled:!0},i.a.createElement(A.a.Header,null,i.a.createElement(A.a.Row,null,i.a.createElement(A.a.HeaderCell,null,"Name"),i.a.createElement(A.a.HeaderCell,null,"Gender"),i.a.createElement(A.a.HeaderCell,null,"Occupation"),i.a.createElement(A.a.HeaderCell,null,"Health Rating"))),i.a.createElement(A.a.Body,null,Object.values(t).map((function(e){return i.a.createElement(A.a.Row,{key:e.id},i.a.createElement(A.a.Cell,null,i.a.createElement(b.b,{to:"/patients/".concat(e.id)}," ",e.name)),i.a.createElement(A.a.Cell,null,e.gender),i.a.createElement(A.a.Cell,null,e.occupation),i.a.createElement(A.a.Cell,null,i.a.createElement(G,{showText:!1,rating:1})))})))),i.a.createElement(L,{modalOpen:c,onSubmit:y,error:E,onClose:g}),i.a.createElement(O.a,{onClick:function(){return o(!0)}},"Add New Patient"))},U=t(46),K=t(75),Q=t(457),W=function(e){var a=e.onSubmit,t=e.onCancel,n=T(),r=Object(p.a)(n,1)[0].diagnoses;return i.a.createElement(R.d,{initialValues:{date:"",specialist:"",description:"",diagnosisCodes:[],discharge:{date:"",criteria:""},type:"Hospital"},onSubmit:a,validate:function(e){var a={};return e.date||(a.date="Field is required"),e.specialist||(a.specialist="Field is required"),e.discharge.date&&e.discharge.criteria||(a.date="Field is required",a.criteria="Field is required"),e.description||(a.description="Field is required"),a}},(function(e){var a=e.isValid,n=e.dirty,l=e.setFieldValue,c=e.setFieldTouched;return i.a.createElement(R.c,{className:"form ui"},i.a.createElement(R.b,{label:"Type",placeholder:"type",name:"type",component:_}),i.a.createElement(R.b,{label:"Date",placeholder:"YYYY-MM-DD",name:"date",component:_}),i.a.createElement(R.b,{label:"Specialist",placeholder:"specialist",name:"specialist",component:_}),i.a.createElement(R.b,{label:"Discharge Date",placeholder:"YYYY-MM-DD",name:"discharge.date",component:_}),i.a.createElement(R.b,{label:"Criteria",placeholder:"Criteria",name:"discharge.criteria",component:_}),i.a.createElement(R.b,{label:"Description",placeholder:"Description",name:"description",component:_}),i.a.createElement(B,{diagnoses:r,setFieldValue:l,setFieldTouched:c}),i.a.createElement(F.a,null,i.a.createElement(F.a.Column,{floated:"left",width:5},i.a.createElement(O.a,{type:"button",onClick:t,color:"red"},"Cancel")),i.a.createElement(F.a.Column,{floated:"right",width:5},i.a.createElement(O.a,{type:"submit",floated:"right",color:"green",disabled:!n||!a},"Add"))))}))},X=function(e){var a=e.modalOpen,t=e.onClose,n=e.onSubmit,r=e.error,l=Object(c.useState)("Hospital"),o=Object(p.a)(l,2);o[0],o[1];return i.a.createElement(x.a,{open:a,onClose:t,centered:!1,closeIcon:!0},i.a.createElement(x.a.Header,null,"Add a new entry"),i.a.createElement(x.a.Content,null,r&&i.a.createElement(H.a,{inverted:!0,color:"red"},"Error: ".concat(r)),i.a.createElement(W,{onSubmit:n,onCancel:t})))},Z=function(){var e=Object(f.f)().id,a=Object(c.useState)(null),t=Object(p.a)(a,2),n=t[0],r=t[1],l=T(),o=Object(p.a)(l,2),s=o[0],u=s.patients,E=s.diagnoses,b=o[1],g=i.a.useState(),y=Object(p.a)(g,2),C=y[0],w=y[1],N=i.a.useState(),S=Object(p.a)(N,2),D=(S[0],S[1]),x=i.a.useState(!1),F=Object(p.a)(x,2),R=F[0],I=F[1],Y=function(){I(!1),w(void 0)},P=function(){var e=Object(d.a)(m.a.mark((function e(a){var t,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!n){e.next=8;break}return e.next=4,h.a.post("".concat(j,"/patients/").concat(n.id,"/entries"),a);case 4:t=e.sent,r=t.data,Y(),b(k(r));case 8:e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.response.data),w(e.t0.response.data.error),window.alert(e.t0.response.data);case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(a){return e.apply(this,arguments)}}();if(Object(c.useEffect)((function(){var a=Object.values(u).find((function(a){return a.id===e}));a&&(a.ssn?r(a):h.a.get("".concat(j,"/patients/").concat(e)).then((function(e){b(function(e){return{type:"UPDATE_PATIENT",payload:e}}(e.data)),r(e.data),D(e.data.entries)})))}),[u]),n){console.log(n),console.log(n.entries),console.log(E);var _="";switch(n.gender){case"male":_="man";break;case"female":_="woman";break;default:_="transgender"}var B=function(e){var a=e.entry;return i.a.createElement(H.a,null,"Hospital Entry ",i.a.createElement(U.a,{className:"hospital outline icon",size:"large"}),i.a.createElement(A.a.Row,null,"Reason for Hospital Discharge : ",a.discharge.criteria," "),i.a.createElement(A.a.Row,null,"Date of Discharge: ",a.discharge.date))},q=function(e){var a=e.entry;return a.sickLeave?i.a.createElement(H.a,null,"Occupational Healthcare",i.a.createElement(U.a,{className:"user md icon",size:"large"}),i.a.createElement(K.a,null,"Employer: ",a.employerName),i.a.createElement(K.a,null,"Sick leave: START: ",a.sickLeave.startDate," END: ",a.sickLeave.endDate)):i.a.createElement(H.a,null,"Occupational Healthcare",i.a.createElement(U.a,{className:"user md icon",size:"large"}),i.a.createElement(A.a.Row,null," Employer: ",a.employerName))},M=function(e){var a=e.entry,t=function(e){switch(e.entry.healthCheckRating){case 0:return i.a.createElement(U.a,{color:"green",className:"heart"});case 1:return i.a.createElement(U.a,{color:"yellow",className:"heart"});case 2:return i.a.createElement(U.a,{color:"teal",className:"heart"});case 3:return i.a.createElement(U.a,{color:"red",className:"heart"});default:return i.a.createElement("div",null)}};return i.a.createElement(H.a,null,"Health Check-up",i.a.createElement(U.a,{className:"stethoscope icon",size:"large"}),i.a.createElement(t,{entry:a}))},L=function(e){var a=e.entry;switch(a.type){case"Hospital":return i.a.createElement(B,{entry:a});case"OccupationalHealthcare":return i.a.createElement(q,{entry:a});case"HealthCheck":return i.a.createElement(M,{entry:a});default:return function(e){throw new Error("error, 'value: ".concat(e," not defined"))}(a)}};return i.a.createElement("div",null,i.a.createElement(v.a,{textAlign:"left"},i.a.createElement("h2",null,n.name,i.a.createElement(U.a,{className:_})),i.a.createElement("p",null,i.a.createElement("strong",null,"SSN: ")," ",n.ssn),i.a.createElement("p",null,i.a.createElement("strong",null,"Date of Birth:")," ",n.dateOfBirth),i.a.createElement("p",null,i.a.createElement("strong",null,"Occupation: ")," ",n.occupation),i.a.createElement("h3",null,"Entries: "),i.a.createElement(A.a,{celled:!0},i.a.createElement(A.a.Body,null,n.entries.map((function(e,a){var t;return i.a.createElement(A.a.Row,{key:e.id},a+1,i.a.createElement(K.a,{style:{padding:"10px"}}," ",i.a.createElement("b",null,"Entry date:")," ",e.date,"   ",i.a.createElement(L,{entry:e}),"   "),i.a.createElement(K.a,null," ",i.a.createElement("strong",null,"Description:")," ",e.description),i.a.createElement(Q.a,{bulleted:!0}," ",null===(t=e.diagnosisCodes)||void 0===t?void 0:t.map((function(e){var a;return i.a.createElement(Q.a.Item,{key:e,style:{padding:"10px"}}," ",i.a.createElement("b",null,"Diagnosis code: "),e," ",i.a.createElement("b",null,"Diagnosis: "),null===E||void 0===E||null===(a=E.find((function(a){return a.code===e})))||void 0===a?void 0:a.name," ")})),"    "))}))))),i.a.createElement(X,{modalOpen:R,onSubmit:P,error:C,onClose:Y}),i.a.createElement(O.a,{onClick:function(){return I(!0)}},"Add New Entry"))}return i.a.createElement("div",null,C)},$=function(){var e=T(),a=Object(p.a)(e,2)[1];return i.a.useEffect((function(){h.a.get("".concat(j,"/ping")),function(){var e=Object(d.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.get("".concat(j,"/patients"));case 3:t=e.sent,n=t.data,a({type:"SET_PATIENT_LIST",payload:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()(),function(){var e=Object(d.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.get("".concat(j,"/diagnosis"));case 3:t=e.sent,n=t.data,a({type:"SET_DIAGNOSES",payload:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()()}),[a]),i.a.createElement("div",{className:"App"},i.a.createElement(b.a,null,i.a.createElement(v.a,null,i.a.createElement(g.a,{as:"h1"},"Patientor"),i.a.createElement(O.a,{as:b.b,to:"/",primary:!0},"Home"),i.a.createElement(y.a,{hidden:!0}),i.a.createElement(f.c,null,i.a.createElement(f.a,{path:"/patients/:id",render:function(){return i.a.createElement(Z,null)}}),i.a.createElement(f.a,{path:"/",render:function(){return i.a.createElement(J,null)}})))))};s.a.render(i.a.createElement(D,{reducer:function(e,a){switch(a.type){case"SET_PATIENT_LIST":return Object(w.a)(Object(w.a)({},e),{},{patients:Object(w.a)(Object(w.a)({},a.payload.reduce((function(e,a){return Object(w.a)(Object(w.a)({},e),{},Object(C.a)({},a.id,a))}),{})),e.patients)});case"ADD_PATIENT":case"UPDATE_PATIENT":return Object(w.a)(Object(w.a)({},e),{},{patients:Object(w.a)(Object(w.a)({},e.patients),{},Object(C.a)({},a.payload.id,a.payload))});case"SET_DIAGNOSES":return Object(w.a)(Object(w.a)({},e),{},{diagnoses:a.payload});case"ADD_ENTRY":return Object(w.a)(Object(w.a)({},e),{},{patients:Object(w.a)({},e.patients)});default:return e}}},i.a.createElement($,null)),document.getElementById("root"))}},[[265,1,2]]]);
//# sourceMappingURL=main.c0925969.chunk.js.map