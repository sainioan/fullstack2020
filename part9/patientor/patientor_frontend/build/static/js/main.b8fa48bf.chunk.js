(this.webpackJsonppatientor=this.webpackJsonppatientor||[]).push([[0],{265:function(e,a,t){e.exports=t(443)},443:function(e,a,t){"use strict";t.r(a);var n,l,r,c=t(0),i=t.n(c),o=t(62),s=t.n(o),u=(t(270),t(38)),d=t.n(u),m=t(63),p=t(22),E=t(44),h=t.n(E),b=t(76),f=t(19),v=t(451),g=t(462),y=t(459),O=t(452),C="http://localhost:3001/api",k=t(77),D=t(24),w=function(e,a){return{type:"UPDATE_PATIENT",payload:Object(D.a)(Object(D.a)({},e),{},{entries:e.entries.concat(a)})}},S={patients:{},diagnoses:new Array},j=Object(c.createContext)([S,function(){return S}]),N=function(e){var a=e.reducer,t=e.children,n=Object(c.useReducer)(a,S),l=Object(p.a)(n,2),r=l[0],o=l[1];return i.a.createElement(j.Provider,{value:[r,o]},t)},T=function(){return Object(c.useContext)(j)},F=t(458),H=t(454),A=t(461),Y=t(460),x=t(15),R=t(453),q=t(456),M=function(e){var a=e.name,t=e.label,n=e.options;return i.a.createElement(R.a.Field,null,i.a.createElement("label",null,t),i.a.createElement(x.b,{as:"select",name:a,className:"ui dropdown"},n.map((function(e){return i.a.createElement("option",{key:e.value,value:e.value},e.label||e.value)}))))},L=function(e){var a=e.field,t=e.label,n=e.placeholder;return i.a.createElement(R.a.Field,null,i.a.createElement("label",null,t),i.a.createElement(x.b,Object.assign({placeholder:n},a)),i.a.createElement("div",{style:{color:"red"}},i.a.createElement(x.a,{name:a.name})))},I=function(e){var a=e.field,t=e.label,n=e.min,l=e.max;return i.a.createElement(R.a.Field,null,i.a.createElement("label",null,t),i.a.createElement(x.b,Object.assign({},a,{type:"number",min:n,max:l})),i.a.createElement("div",{style:{color:"red"}},i.a.createElement(x.a,{name:a.name})))},V=function(e){var a=e.diagnoses,t=e.setFieldValue,n=e.setFieldTouched,l="diagnosisCodes",r=a.map((function(e){return{key:e.code,text:"".concat(e.name," (").concat(e.code,")"),value:e.code}}));return i.a.createElement(R.a.Field,null,i.a.createElement("label",null,"Diagnoses"),i.a.createElement(q.a,{fluid:!0,multiple:!0,search:!0,selection:!0,options:r,onChange:function(e,a){n(l,!0),t(l,a.value)}}),i.a.createElement(x.a,{name:l}))};(l=n||(n={}))[l.Healthy=0]="Healthy",l[l.LowRisk=1]="LowRisk",l[l.HighRisk=2]="HighRisk",l[l.CriticalRisk=3]="CriticalRisk",function(e){e.Male="male",e.Female="female",e.Other="other"}(r||(r={}));var P=[{value:r.Male,label:"Male"},{value:r.Female,label:"Female"},{value:r.Other,label:"Other"}],_=function(e){var a=e.onSubmit,t=e.onCancel;return i.a.createElement(x.d,{initialValues:{name:"",ssn:"",dateOfBirth:"",occupation:"",gender:r.Other},onSubmit:a,validate:function(e){var a={};return e.name||(a.name="Field is required"),e.ssn||(a.ssn="Field is required"),e.dateOfBirth||(a.dateOfBirth="Field is required"),e.occupation||(a.occupation="Field is required"),a}},(function(e){var a=e.isValid,n=e.dirty;return i.a.createElement(x.c,{className:"form ui"},i.a.createElement(x.b,{label:"Name",placeholder:"Name",name:"name",component:L}),i.a.createElement(x.b,{label:"Social Security Number",placeholder:"SSN",name:"ssn",component:L}),i.a.createElement(x.b,{label:"Date Of Birth",placeholder:"YYYY-MM-DD",name:"dateOfBirth",component:L}),i.a.createElement(x.b,{label:"Occupation",placeholder:"Occupation",name:"occupation",component:L}),i.a.createElement(M,{label:"Gender",name:"gender",options:P}),i.a.createElement(Y.a,null,i.a.createElement(Y.a.Column,{floated:"left",width:5},i.a.createElement(y.a,{type:"button",onClick:t,color:"red"},"Cancel")),i.a.createElement(Y.a.Column,{floated:"right",width:5},i.a.createElement(y.a,{type:"submit",floated:"right",color:"green",disabled:!n||!a},"Add"))))}))},B=function(e){var a=e.modalOpen,t=e.onClose,n=e.onSubmit,l=e.error;return i.a.createElement(H.a,{open:a,onClose:t,centered:!1,closeIcon:!0},i.a.createElement(H.a.Header,null,"Add a new patient"),i.a.createElement(H.a.Content,null,l&&i.a.createElement(A.a,{inverted:!0,color:"red"},"Error: ".concat(l)),i.a.createElement(_,{onSubmit:n,onCancel:t})))},G=t(464),z=["The patient is in great shape","The patient has a low risk of getting sick","The patient has a high risk of getting sick","The patient has a diagnosed condition"],U=function(e){var a=e.rating,t=e.showText;return i.a.createElement("div",{className:"health-bar"},i.a.createElement(G.a,{icon:"heart",disabled:!0,rating:4-a,maxRating:4}),t?i.a.createElement("p",null,z[a]):null)},$=function(){var e=T(),a=Object(p.a)(e,2),t=a[0].patients,n=a[1],l=i.a.useState(!1),r=Object(p.a)(l,2),c=r[0],o=r[1],s=i.a.useState(),u=Object(p.a)(s,2),E=u[0],f=u[1],g=function(){o(!1),f(void 0)},O=function(){var e=Object(m.a)(d.a.mark((function e(a){var t,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.post("".concat(C,"/patients"),a);case 3:t=e.sent,l=t.data,n({type:"ADD_PATIENT",payload:l}),g(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0.response.data),f(e.t0.response.data.error);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(a){return e.apply(this,arguments)}}();return i.a.createElement("div",{className:"App"},i.a.createElement(v.a,{textAlign:"center"},i.a.createElement("h3",null,"Patient list")),i.a.createElement(F.a,{celled:!0},i.a.createElement(F.a.Header,null,i.a.createElement(F.a.Row,null,i.a.createElement(F.a.HeaderCell,null,"Name"),i.a.createElement(F.a.HeaderCell,null,"Gender"),i.a.createElement(F.a.HeaderCell,null,"Occupation"),i.a.createElement(F.a.HeaderCell,null,"Health Rating"))),i.a.createElement(F.a.Body,null,Object.values(t).map((function(e){return i.a.createElement(F.a.Row,{key:e.id},i.a.createElement(F.a.Cell,null,i.a.createElement(b.b,{to:"/patients/".concat(e.id)}," ",e.name)),i.a.createElement(F.a.Cell,null,e.gender),i.a.createElement(F.a.Cell,null,e.occupation),i.a.createElement(F.a.Cell,null,i.a.createElement(U,{showText:!1,rating:1})))})))),i.a.createElement(B,{modalOpen:c,onSubmit:O,error:E,onClose:g}),i.a.createElement(y.a,{onClick:function(){return o(!0)}},"Add New Patient"))},J=t(46),K=t(75),Q=t(457),W=function(e){var a=e.onSubmit,t=e.onCancel,n=T(),l=Object(p.a)(n,1)[0].diagnoses;return i.a.createElement(x.d,{initialValues:{date:"",specialist:"",description:"",diagnosisCodes:[],discharge:{date:"",criteria:""},type:"Hospital"},onSubmit:a,validate:function(e){var a={};return e.date||(a.date="Field is required"),null==e.date.match(/^\d{4}-\d{2}-\d{2}$/)&&(a.date="Date formatting error"),e.specialist||(a.specialist="Field is required"),e.discharge.date&&e.discharge.criteria||(a.date="Field is required",a.criteria="Field is required"),e.description||(a.description="Field is required"),a}},(function(e){var a=e.isValid,n=e.dirty,r=e.setFieldValue,c=e.setFieldTouched;return i.a.createElement(x.c,{className:"form ui"},i.a.createElement(x.b,{label:"Type",placeholder:"type",name:"type",component:L}),i.a.createElement(x.b,{label:"Date",placeholder:"YYYY-MM-DD",name:"date",component:L}),i.a.createElement(x.b,{label:"Specialist",placeholder:"specialist",name:"specialist",component:L}),i.a.createElement(x.b,{label:"Discharge Date",placeholder:"YYYY-MM-DD",name:"discharge.date",component:L}),i.a.createElement(x.b,{label:"Discharge Criteria",placeholder:"Criteria",name:"discharge.criteria",component:L}),i.a.createElement(x.b,{label:"Description",placeholder:"Description",name:"description",component:L}),i.a.createElement(V,{diagnoses:l,setFieldValue:r,setFieldTouched:c}),i.a.createElement(Y.a,null,i.a.createElement(Y.a.Column,{floated:"left",width:5},i.a.createElement(y.a,{type:"button",onClick:t,color:"red"},"Cancel")),i.a.createElement(Y.a.Column,{floated:"right",width:5},i.a.createElement(y.a,{type:"submit",floated:"right",color:"green",disabled:!n||!a},"Add"))))}))},X=function(e){var a=e.onSubmit,t=e.onCancel,n=T(),l=Object(p.a)(n,1)[0].diagnoses;return i.a.createElement(x.d,{initialValues:{date:"",specialist:"",description:"",diagnosisCodes:[],healthCheckRating:3,type:"HealthCheck"},onSubmit:a,validate:function(e){var a={};return e.date||(a.date="Field is required"),null==e.date.match(/^\d{4}-\d{2}-\d{2}$/)&&(a.date="Date formatting error"),e.specialist||(a.specialist="Field is required"),e.healthCheckRating||(a.healthCheckRating="Field is required"),e.description||(a.description="Field is required"),a}},(function(e){var a=e.isValid,n=e.dirty,r=e.setFieldValue,c=e.setFieldTouched;return i.a.createElement(x.c,{className:"form ui"},i.a.createElement(x.b,{label:"Type",placeholder:"type",name:"type",component:L}),i.a.createElement(x.b,{label:"Date",placeholder:"YYYY-MM-DD",name:"date",component:L}),i.a.createElement(x.b,{label:"Specialist",placeholder:"specialist",name:"specialist",component:L}),i.a.createElement(x.b,{label:"healthCheckRating",name:"healthCheckRating",component:I,min:0,max:3}),i.a.createElement(x.b,{label:"Description",placeholder:"Description",name:"description",component:L}),i.a.createElement(V,{diagnoses:l,setFieldValue:r,setFieldTouched:c}),i.a.createElement(Y.a,null,i.a.createElement(Y.a.Column,{floated:"left",width:5},i.a.createElement(y.a,{type:"button",onClick:t,color:"red"},"Cancel")),i.a.createElement(Y.a.Column,{floated:"right",width:5},i.a.createElement(y.a,{type:"submit",floated:"right",color:"green",disabled:!n||!a},"Add"))))}))},Z=function(e){var a=e.onSubmit,t=e.onCancel,n=T(),l=Object(p.a)(n,1)[0].diagnoses;return i.a.createElement(x.d,{initialValues:{date:"",specialist:"",description:"",diagnosisCodes:[],employerName:"",sickLeave:{startDate:"",endDate:""},type:"OccupationalHealthcare"},onSubmit:a,validate:function(e){var a={};function t(e){return null!=e.match(/^\d{4}-\d{2}-\d{2}$/)}return e.date||(a.date="Field is required"),t(e.date)||(a.date="Date formatting error"),e.specialist||(a.specialist="Field is required"),e.employerName||(a.employerName="Field is required"),e.description||(a.description="Field is required"),e.sickLeave&&(t(e.sickLeave.startDate)&&t(e.sickLeave.endDate)||(a.sickLeave="Date formatting error")),a}},(function(e){var a=e.isValid,n=e.dirty,r=e.setFieldValue,c=e.setFieldTouched;return i.a.createElement(x.c,{className:"form ui"},i.a.createElement(x.b,{label:"Type",placeholder:"type",name:"type",component:L}),i.a.createElement(x.b,{label:"Date",placeholder:"YYYY-MM-DD",name:"date",component:L}),i.a.createElement(x.b,{label:"Specialist",placeholder:"specialist",name:"specialist",component:L}),i.a.createElement(x.b,{label:"Description",placeholder:"Description",name:"description",component:L}),i.a.createElement(x.b,{label:"Employer Name",placeholder:"Employer Name",name:"employerName",component:L}),i.a.createElement(x.b,{label:"Sick Leave Start Date",placeholder:"YYYY-MM-DD",name:"sickLeave.startDate",component:L}),i.a.createElement(x.b,{label:"Sick Leave End Date",placeholder:"YYYY-MM-DD",name:"sickLeave.endDate",component:L}),i.a.createElement(V,{diagnoses:l,setFieldValue:r,setFieldTouched:c}),i.a.createElement(Y.a,null,i.a.createElement(Y.a.Column,{floated:"left",width:5},i.a.createElement(y.a,{type:"button",onClick:t,color:"red"},"Cancel")),i.a.createElement(Y.a.Column,{floated:"right",width:5},i.a.createElement(y.a,{type:"submit",floated:"right",color:"green",disabled:!n||!a},"Add"))))}))},ee=function(e){var a=e.modalOpen,t=e.onClose,n=e.onSubmit,l=e.error,r=Object(c.useState)("Hospital"),o=Object(p.a)(r,2),s=o[0],u=o[1];return i.a.createElement(H.a,{open:a,onClose:t,centered:!1,closeIcon:!0},i.a.createElement(H.a.Header,null,"Add a new entry"),i.a.createElement(H.a.Content,null,l&&i.a.createElement(A.a,{inverted:!0,color:"red"},"Error: ".concat(l)),i.a.createElement(y.a.Group,null,i.a.createElement(y.a,{class:"ui teal basic button",content:"Health Check",color:"HealthCheck"===s?"twitter":void 0,onClick:function(){return u("HealthCheck")}}),i.a.createElement(y.a,{class:"ui teal basic button",content:"Occupational Healthcare",color:"OccupationalHealthcare"===s?"facebook":void 0,onClick:function(){return u("OccupationalHealthcare")}}),"  ",i.a.createElement(y.a,{class:"ui teal basic button",content:"Hospital",color:"Hospital"===s?"instagram":void 0,onClick:function(){return u("Hospital")}})),"Hospital"===s?i.a.createElement(W,{onSubmit:n,onCancel:t}):"HealthCheck"===s?i.a.createElement(X,{onSubmit:n,onCancel:t}):i.a.createElement(Z,{onSubmit:n,onCancel:t})))},ae=function(){var e=Object(f.f)().id,a=Object(c.useState)(null),t=Object(p.a)(a,2),n=t[0],l=t[1],r=T(),o=Object(p.a)(r,2),s=o[0],u=s.patients,E=s.diagnoses,b=o[1],g=i.a.useState(),O=Object(p.a)(g,2),k=O[0],D=O[1],S=i.a.useState(!1),j=Object(p.a)(S,2),N=j[0],H=j[1],Y=function(){H(!1),D(void 0)},x=function(){var e=Object(m.a)(d.a.mark((function e(a){var t,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!n){e.next=8;break}return e.next=4,h.a.post("".concat(C,"/patients/").concat(n.id,"/entries"),a);case 4:t=e.sent,l=t.data,Y(),b(w(n,l));case 8:e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.response.data),D(e.t0.response.data.error),window.alert(e.t0.response.data);case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(a){return e.apply(this,arguments)}}();if(Object(c.useEffect)((function(){var a=Object.values(u).find((function(a){return a.id===e}));a&&(a.ssn?l(a):h.a.get("".concat(C,"/patients/").concat(e)).then((function(e){b(function(e){return{type:"UPDATE_PATIENT",payload:e}}(e.data)),l(e.data)})))}),[u,b,e]),n){var R="";switch(n.gender){case"male":R="man";break;case"female":R="woman";break;default:R="transgender"}var q=function(e){var a=e.entry;return i.a.createElement(A.a,null,"Hospital Entry ",i.a.createElement(J.a,{className:"hospital outline icon",size:"large"}),i.a.createElement(F.a.Row,null,"Reason for Hospital Discharge : ",a.discharge.criteria," "),i.a.createElement(F.a.Row,null,"Date of Discharge: ",a.discharge.date))},M=function(e){var a=e.entry;return a.sickLeave?i.a.createElement(A.a,null,"Occupational Healthcare",i.a.createElement(J.a,{className:"user md icon",size:"large"}),i.a.createElement(K.a,null,"Employer: ",a.employerName),i.a.createElement(K.a,null,"Sick leave: START: ",a.sickLeave.startDate," END: ",a.sickLeave.endDate)):i.a.createElement(A.a,null,"Occupational Healthcare",i.a.createElement(J.a,{className:"user md icon",size:"large"}),i.a.createElement(F.a.Row,null," Employer: ",a.employerName))},L=function(e){var a=e.entry,t=function(e){switch(e.entry.healthCheckRating){case 0:return i.a.createElement(J.a,{color:"green",className:"heart"});case 1:return i.a.createElement(J.a,{color:"yellow",className:"heart"});case 2:return i.a.createElement(J.a,{color:"teal",className:"heart"});case 3:return i.a.createElement(J.a,{color:"red",className:"heart"});default:return i.a.createElement("div",null)}};return i.a.createElement(A.a,null,"Health Check-up",i.a.createElement(J.a,{className:"stethoscope icon",size:"large"}),i.a.createElement(t,{entry:a}))},I=function(e){var a=e.entry;switch(a.type){case"Hospital":return i.a.createElement(q,{entry:a});case"OccupationalHealthcare":return i.a.createElement(M,{entry:a});case"HealthCheck":return i.a.createElement(L,{entry:a});default:return function(e){throw new Error("error, 'value: ".concat(e," not defined"))}(a)}};return i.a.createElement("div",null,i.a.createElement(v.a,{textAlign:"left"},i.a.createElement("h2",null,n.name,i.a.createElement(J.a,{className:R})),i.a.createElement("p",null,i.a.createElement("strong",null,"SSN: ")," ",n.ssn),i.a.createElement("p",null,i.a.createElement("strong",null,"Date of Birth:")," ",n.dateOfBirth),i.a.createElement("p",null,i.a.createElement("strong",null,"Occupation: ")," ",n.occupation),i.a.createElement("h3",null,"Entries: "),i.a.createElement(F.a,{celled:!0},i.a.createElement(F.a.Body,null,n.entries.map((function(e,a){var t;return i.a.createElement(F.a.Row,{key:e.id},a+1,i.a.createElement(K.a,{style:{padding:"10px"}}," ",i.a.createElement("b",null,"Entry date:")," ",e.date,"   ",i.a.createElement(I,{entry:e}),"   "),i.a.createElement(K.a,null," ",i.a.createElement("strong",null,"Description:")," ",e.description),i.a.createElement(Q.a,{bulleted:!0}," ",null===(t=e.diagnosisCodes)||void 0===t?void 0:t.map((function(e){var a;return i.a.createElement(Q.a.Item,{key:e,style:{padding:"10px"}}," ",i.a.createElement("b",null,"Diagnosis code: "),e," ",i.a.createElement("b",null,"Diagnosis: "),null===E||void 0===E||null===(a=E.find((function(a){return a.code===e})))||void 0===a?void 0:a.name," ")})),"    "))}))))),i.a.createElement(ee,{modalOpen:N,onSubmit:x,error:k,onClose:Y}),i.a.createElement(y.a,{onClick:function(){return H(!0)}},"Add New Entry"))}return i.a.createElement("div",null,k)},te=function(){var e=T(),a=Object(p.a)(e,2)[1];return i.a.useEffect((function(){h.a.get("".concat(C,"/ping")),function(){var e=Object(m.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.get("".concat(C,"/patients"));case 3:t=e.sent,n=t.data,a({type:"SET_PATIENT_LIST",payload:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()(),function(){var e=Object(m.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.get("".concat(C,"/diagnosis"));case 3:t=e.sent,n=t.data,a({type:"SET_DIAGNOSES",payload:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()()}),[a]),i.a.createElement("div",{className:"App"},i.a.createElement(b.a,null,i.a.createElement(v.a,null,i.a.createElement(g.a,{as:"h1"},"Patientor"),i.a.createElement(y.a,{as:b.b,to:"/",primary:!0},"Home"),i.a.createElement(O.a,{hidden:!0}),i.a.createElement(f.c,null,i.a.createElement(f.a,{path:"/patients/:id",render:function(){return i.a.createElement(ae,null)}}),i.a.createElement(f.a,{path:"/",render:function(){return i.a.createElement($,null)}})))))};s.a.render(i.a.createElement(N,{reducer:function(e,a){switch(a.type){case"SET_PATIENT_LIST":return Object(D.a)(Object(D.a)({},e),{},{patients:Object(D.a)(Object(D.a)({},a.payload.reduce((function(e,a){return Object(D.a)(Object(D.a)({},e),{},Object(k.a)({},a.id,a))}),{})),e.patients)});case"ADD_PATIENT":case"UPDATE_PATIENT":return Object(D.a)(Object(D.a)({},e),{},{patients:Object(D.a)(Object(D.a)({},e.patients),{},Object(k.a)({},a.payload.id,a.payload))});case"SET_DIAGNOSES":return Object(D.a)(Object(D.a)({},e),{},{diagnoses:a.payload});default:return e}}},i.a.createElement(te,null)),document.getElementById("root"))}},[[265,1,2]]]);
//# sourceMappingURL=main.b8fa48bf.chunk.js.map